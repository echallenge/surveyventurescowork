name = "surveystack-pro"
main = "src/index.js"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]
account_id = "b2ce7728512991a0a4392606306779d7"

# Deploy to workers.dev first, then add custom domains
workers_dev = true

# ── D1 Databases ──────────────────────────────────────────
[[d1_databases]]
binding = "DB"
database_name = "surveystack-db"
database_id = "2f3911d5-dc22-41fe-be6c-1c10742f73e7"

# ── KV Namespaces ─────────────────────────────────────────
[[kv_namespaces]]
binding = "CACHE"
id = "008989f2d030491c8d45e0bf93c3c454"

[[kv_namespaces]]
binding = "SESSIONS"
id = "ad59b249d4404c62b3d6c2a239eab15a"

# ── R2 Buckets ────────────────────────────────────────────
# Enable R2 in Cloudflare Dashboard first, then uncomment:
# [[r2_buckets]]
# binding = "MEDIA"
# bucket_name = "surveystack-media"

# ── Environment Variables ─────────────────────────────────
[vars]
PLATFORM_NAME = "SurveyStack"
PLATFORM_VERSION = "2.0.0"
VENTURE_OS_URL = "https://ventureos.com"
AGENT_DAO_URL = "https://agentdao.com"
REFERRALS_URL = "https://referrals.com"
VNOC_URL = "https://vnoc.com"
CONTRIB_URL = "https://contrib.com"
ESHARES_URL = "https://eshares.com"
COCEO_URL = "https://coceo.com"
IMPACT_WEBHOOK_URL = ""
# Secrets (set via wrangler secret put):
# ADMIN_PASSWORD, ANTHROPIC_API_KEY, SMTP_API_KEY

# ── Domain Routes ─────────────────────────────────────────
# PHASE 1: Deploy to workers.dev first (workers_dev = true above)
# PHASE 2: Uncomment routes below after domains are on Cloudflare DNS
#
# To add a domain: ensure its DNS is managed by Cloudflare,
# then add a route entry here and run: npx wrangler deploy
#
# routes = [
#   # Crown Jewels - Travel
#   { pattern = "tripsurvey.com/*", custom_domain = true },
#   { pattern = "hawaiisurvey.com/*", custom_domain = true },
#   { pattern = "travelpoll.com/*", custom_domain = true },
#   # Crown Jewels - Home
#   { pattern = "homepoll.com/*", custom_domain = true },
#   { pattern = "homesurvey.com/*", custom_domain = true },
#   { pattern = "realtysurvey.com/*", custom_domain = true },
#   # Crown Jewels - Health
#   { pattern = "drugsurvey.com/*", custom_domain = true },
#   { pattern = "healthpoll.com/*", custom_domain = true },
#   # Crown Jewels - Food
#   { pattern = "barsurvey.com/*", custom_domain = true },
#   { pattern = "coffeesurvey.com/*", custom_domain = true },
#   # Crown Jewels - Tech
#   { pattern = "javapoll.com/*", custom_domain = true },
#   { pattern = "datasurvey.com/*", custom_domain = true },
#   { pattern = "codesurvey.com/*", custom_domain = true },
#   # Crown Jewels - Finance
#   { pattern = "stocksurvey.com/*", custom_domain = true },
#   { pattern = "401ksurvey.com/*", custom_domain = true },
#   # Crown Jewels - Education
#   { pattern = "studentpoll.com/*", custom_domain = true },
#   { pattern = "studentsurvey.com/*", custom_domain = true },
#   # Crown Jewels - Environment
#   { pattern = "ecosurvey.com/*", custom_domain = true },
#   { pattern = "solarsurvey.com/*", custom_domain = true },
#   # Crown Jewels - Business
#   { pattern = "surveyboard.com/*", custom_domain = true },
#   { pattern = "retailsurvey.com/*", custom_domain = true },
#   # Crown Jewels - Entertainment
#   { pattern = "gamingpoll.com/*", custom_domain = true },
#   { pattern = "gamepoll.com/*", custom_domain = true },
#   # Crown Jewels - Politics
#   { pattern = "electionpoll.com/*", custom_domain = true },
#   { pattern = "politicalsurvey.com/*", custom_domain = true },
#   # Platform hub
#   { pattern = "surveyventures.com/*", custom_domain = true },
#   { pattern = "surveystack.com/*", custom_domain = true },
# ]
